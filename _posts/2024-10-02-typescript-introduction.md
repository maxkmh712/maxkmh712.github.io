---
layout: single
title: "[ TYPESCRIPT ] 타입스크립트 도입"
typora-root-url: ../
categories: [TYPESCRIPT]
tag: [typescript, compile, build, tsconfig.json]
author_profile: true # 연락처 정보 숨기기
search: true
toc: true
toc_sticky: true
---

![typescript](/images/2024-10-02-typescript-config/typescript.png)

## 컴파일과 빌드

두 용어는 코드 작성 후 실행 가능한 형태로 변환하는 과정에 관련되어 있지만, 그 과정과 범위가 다르기 때문에 구분되어 사용한다.

### 1. 컴파일(Compile)

- 컴파일이란 프로그래밍 언어로 작성된 소스 코드를 기계어(컴퓨터가 이해할 수 있는 코드) 또는 중간 언어로 변환하는 과정이다.
- 컴파일러(compiler)는 이 작업을 수행하는 도구로, 코드의 문법을 체크하고 에러를 잡아내면서 프로그램을 실행 가능한 형태로 변환시켜준다.
- 예를 들어, TypeScript 코드를 자바스크립트로 변환하거나, C++ 코드를 기계어로 변환하는 작업이 있다. TypeScript는 브라우저에서 직접 실행되지 않으므로, 먼저 자바스크립트로 변환하는 과정이 필요한데 이 과정이 컴파일이다. TypeScript 컴파일러가 이 작업을 해주고, 결과적으로 브라우저나 Node.js에서 실행할 수 있는 자바스크립트 파일이 생성되는 것이다.

### 2. 빌드(Build)

- 빌드란 컴파일을 포함한 더 포괄적인 과정으로, 소스 코드를 실제로 배포 가능한 실행 파일 또는 실행 가능한 상태로 만드는 전체 과정을 말한다.
- 그렇기 때문에 컴파일 뿐만 아니라 아래의 다양한 작업이 빌드 과정에 포함될 수 있다.
  - **컴파일**: 소스 코드를 기계어 또는 중간 언어로 변환
  - **코드 압축 및 번들링**: 파일 크기를 줄이고 성능을 높이기 위해 여러 파일을 하나로 합치거나 압축
  - **테스트**: 코드가 잘 작동하는지 테스트하는 과정
  - **의존성 설치**: 외부 라이브러리나 모듈을 설치하고 연결
  - **환경 설정**: 배포 환경에 맞는 설정 적용 (예: 개발용과 배포용 설정을 구분)
- 빌드 도구란 여러 작업을 자동화해 주는 도구로, `webpack`, `gulp`, `parcel` 같은 도구들이 빌드 과정을 자동화해준다.
- 컴파일은 빌드의 한 부분이고, 빌드는 컴파일 외에도 여러 추가적인 작업을 포함해 소프트웨어를 완성된 상태로 만드는 과정이다.

## 컴파일 타임과 런타임

타입스크립트의 사용 이유를 알기 전에, 기본적으로 이해할 필요가 있어보이는 개념인 컴파일 타임과 런타임에 대해서 정리해보았다.

### 1. 컴파일 타임(Compile Time)

- 컴파일 타임은 **코드가 실행되기 전에 컴파일러가 코드를 분석하고 변환하는 시점**을 말한다.

- 컴파일 시점에 행해지는 작업들은 다음과 같다.

  1. 구문 분석 : 컴파일러가 소스 코드를 읽고 올바른 구문으로 작성되었는지 확인 후 구문 오류가 있으면 컴파일에 실패한다.
  2. 타입 체크 : Typescript와 같은 정적 타입 언어에서 컴파일러는 변수, 함수, 객체 등이 올바른 타입으로 사용되었는지 검사한다.
  3. 목표 코드 생성 : 컴파일러는 소스 코드를 최종적으로 **기계어(Machine Code)** 또는 **바이트코드(Bytecode)** 같은 형태로 변환하여 컴퓨터가 이해할 수 있는 코드로 만들어낸다.

- 컴파일 타임의 특징

  - 오류 발생 시점 : 타입 체크나 구문 오류 체크 등의 컴파일 타임 오류는 프로그램이 실행되기 전에 발견된다.

  - 속도 : 프로그램이 실행되기 전에 검사가 이루어지므로, 런타임 오류가 줄어들고 코드의 실행 속도가 빨라질 수 있다.

    ![스크린샷 2024-10-02 오후 1.17.45](/images/2024-10-02-typescript-config/스크린샷 2024-10-02 오후 1.17.45.png)

### 2. 런타임(Run Time)

- 런타임은 **프로그램이 실제로 실행되는 시점**을 말한다.

- 런타임에 발생할 수 있는 일들은 다음과 같다.

  1. 메모리 할당 : 프로그램 실행 중 동적으로 메모리를 할당하고 사용하는 작업이 이루어진다.

  2. 입력/출력 처리: 파일을 읽거나 네트워크를 통해 데이터를 주고받는 등의 작업이 수행된다.

  3. 런타임 오류 발생 : 컴파일러가 미리 예측할 수 없는 상황에서 발행하는 오류로, 파일을 찾을 수 없거나, 네트워크 연결이 끊기는 등의 오류가 발생할 수 있다. 이런 경우는 예외처리 (예: `try-catch` 블록)를 통해 처리할 수 있다.

     ```javascript
     let a = 10;
     let b = 0;
     console.log(a / b); // Infinity

     /*
     이 코드에서는 컴파일 타임 오류가 없지만, 런타임에 b가 0이므로 Infinity 결과가 출력된다.
      상황은 런타임 중에만 발생할 수 있으며, 적절한 예외 처리가 없다면 예상하지 못한 동작이 일어날 수 있다.
     */
     ```

### 3. 컴파일 타임 vs 런타임

| 컴파일 타임(Compile Time)                | 런타임(Run Time)                           |
| ---------------------------------------- | ------------------------------------------ |
| 프로그램이 실행되기 전에 발생            | 프로그램이 실행 중일 때 발생               |
| 주로 구문 오류과 타입 오류 체크          | 논리적 오류, 예외 처리 등이 발생할 수 있음 |
| 정적 언어에서 중요 (예: C++, TypeScript) | 모든 프로그래밍 언어에서 발생              |
| 오류가 발생하면 컴파일이 실패            | 런타임 오류는 예외 처리로 다룰 수 있음     |
| 성능 최적화가 이루어짐                   | 동적 할당과 실행 중 작업 처리              |

## Typescript 사용 이유

### 1. 정적 타입 시스템

typescript는 정적 타입 시스템으로서 컴파일 타임에 타입을 체크하여 잘못퇸 타입 사용으로 인한 오류를 사전에 방지할 수 있다.![스크린샷 2024-10-02 오후 1.05.32](/images/2024-10-02-typescript-config/스크린샷 2024-10-02 오후 1.05.32.png)

- 위와 같이 코드 작성 시에 타입 검사를 통해 오류를 사전에 발견할 수 있다. 특히 함수나 객체의 타입 불일치를 막아 런타임에서 발생할 수 있는 예기치 않은 오류를 줄일 수 있다.
- 또한 타입 시스템 덕분에 데이터의 타입을 명확하게 정의할 수 있어, 코드의 안정성과 예측 가능성이 높아진다.

### 2. 개발 생산성 향상

TypeScript는 강력한 **IDE 지원**과 **자동 완성** 기능을 제공하여, 개발자의 생산성을 크게 향상시킨다.

- 자동 완성 : TypeScript는 코드의 타입 정보를 기반으로 IDE에서 자동 완성 기능을 제공하므로, 변수나 함수의 사용법을 쉽게 파악할 수 있다.
- 코드 탐색과 리팩토링 : 타입 정보가 있으므로, 복잡한 코드에서도 정확한 참조를 추적하거나 코드를 리팩토링할 때 더 쉽게 할 수 있다.
- 명확한 오류 메세지 제공 : TypeScript는 명확한 오류 메시지를 제공하여 문제를 빠르게 해결할 수 있도록 도와줍니다.

### 3. 효용성

Typescript는 아래와 같은 이유로 대규모 프로젝트일수록 효용성이 증가한다.

- 코드 일관성 : 타입 정의를 통해 모든 개발자가 동일한 방식으로 코드를 이해하고 사용할 수 있게 된다.
- 유지 보수 : 타입을 명확하게 정의함으로써, 프로젝트가 커지거나 시간이 지나도 코드를 쉽게 이해하고 수정할 수 있다.
- 확장성 : TypeScript는 향후 프로젝트 확장에 대비한 코드 안정성을 제공하므로, 새로운 기능 추가나 구조 변경이 있을 때 더욱 유연하게 대응할 수 있다.

### 4. 최신 JavaScript 기능 지원

TypeScript는 **최신 ECMAScript(ES) 기능**을 미리 사용할 수 있게 해준다. JavaScript 표준이 계속 발전하면서 새로운 기능들이 추가되지만, 브라우저나 Node.js 환경에 따라 이를 바로 사용할 수 없는 경우가 많다. TypeScript는 이러한 최신 기능을 컴파일 타임에 JavaScript의 이전 버전으로 변환해주어, 호환성을 유지하면서 아래와 같은 최신 기능을 사용할 수 있게 해준다.

- 비동기 처리(Async/Await)

- 모듈 시스템(ES Modules)

- Spread 연산자, 화살표 함수 등 최신 문법

### 5. 타입 추론 및 유연성

TypeScript는 강력한 **타입 추론** 기능을 가지고 있어, 모든 변수나 함수에 타입을 명시적으로 지정하지 않아도 되는 유연성을 제공한다. 또한, JavaScript 코드와 호환되므로 기존의 JavaScript 코드를 그대로 사용하면서 점진적으로 TypeScript로 마이그레이션할 수 있다.

```typescript
let x = 10; // TypeScript가 x의 타입을 number로 추론
x = "hello"; // 컴파일 오류 발생 (number를 string으로 변경할 수 없음)
```

### 6. 방대한 커뮤니티와 라이브러리 그리고 다양한 프레임워크

- 많은 JavaScript 라이브러리에 대한 타입 정의 파일을 제공하는 커뮤니티가 활성화되어 있어서 TypeScript와 함께 사용하기 쉽다.
- JavaScript 라이브러리와 함께 사용할 때, `@types` 패키지를 통해 타입 정보를 제공받아 더 안전하게 사용할 수 있다.
- React, Angular, NestJS 등 프론트엔드와 백엔드 모두에서 타입스크립트를 지원하는 프레임워크가 다양하다.

## 컴파일 설정

### 1. tsconfig.json 파일

TypeScript를 지원하는 프로젝트는 보통 루트 디렉토리에 `tsconfig.json` 파일이 위치한다. 달리 말하면, 이 파일이 있는 디렉토리가 프로젝트의 루트 디렉토리, 즉 TypeScript 프로젝트의 시작점으로 간주된다.

이 파일에는 프로젝트를 컴파일 하는데 필요한 두 가지 설정이 포함된다.

1. 루트 파일 : 컴파일할 대상 파일을 지정할 수 있다.
2. 컴파일러 옵션 : TypeScript 코드가 어떻게 javascript로 변환될지에 대한 옵션을 정의할 수 있다.

### 2. TypeScript 컴파일 방법

TypeScript 가 컴파일 되는 방법은 `tsconfig.json` 파일 사용 여부에 따라 다르다.

- `tsconfig.json`을 사용할 경우 2가지 방법
  - **`tsc` 명령어를 인풋 파일 없이 실행할 경우** : 파일을 지정하지 않고 `tsc` 명령어만 실행하면, `tsconfig.json`에 지정된 모든 파일이 자동으로 컴파일 된다. 즉, 별도로 파일을 명시하지 않더라도, 설정 파일에 따라 프로젝트 전반을 컴파일하는 방식이다.
  - **`-p` 옵션을 사용하는 경우** : `tsc` 명령어에 `-p` 옵션을 붙이면 특정 디렉토리 안에 있는 `tsconfig.json` 파일을 직접 지정할 수 있다. 예를 들어, `tsc -p ./someDirectory`라고 하면 해당 디렉토리 안에 있는 `tsconfig.json` 파일이 사용된다.
- `tsconfig.json`을 사용하지 않을 경우
  - `tsconfig.json` 파일이 없어도 `tsc` 명령어 뒤에 특정 파일을 직접 명시하면 TypeScript를 컴파일 할 수 있다. 예를 들어, `tsc 파일명.ts`로 특정 파일을 지정해서 컴파일할 수 있다. 이때는 `tsconfig.json` 설정이 무시되고, 파일마다 컴파일러 옵션을 지정해야 한다.

명령줄에서 지정한 옵션은 `tsconfig.json` 파일에 설정된 옵션보다 우선시된다. 예를 들어, `tsconfig.json` 파일에서 모듈 시스템을 "ES6"로 설정했어도, `tsc -m "commonjs"` 명령어로 실행하면 `commonjs` 모듈 방식이 우선 적용된다.
